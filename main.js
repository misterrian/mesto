(()=>{"use strict";var e={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inputErrorClass:"popup__input_type_error"};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(t,n,r,o,i,a){var u=n._id,c=n.name,s=n.link,l=n.owner,f=n.likes;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ownId=t,this._id=u,this._name=c,this._link=s,this._ownerId=l._id,this._likes=f,this._cardSelector=r,this._handleCardClick=o,this._handleRemoveButtonClick=i,this._handleLikeButtonClick=a}var n,r;return n=e,(r=[{key:"generateCard",value:function(){this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".element__title").textContent=this._name;var e=this._element.querySelector(".element__picture");return e.alt=this._name,e.src=this._link,this._ownId===this._ownerId&&this._element.querySelector(".element__remove").classList.remove("element__remove_hidden"),this._renderLikes(),this._element}},{key:"getCardId",value:function(){return this._id}},{key:"removeCard",value:function(){this._element.remove()}},{key:"isLiked",value:function(){var e=this;return this._likes.find((function(t){return t._id===e._ownId}))}},{key:"updateLikes",value:function(e){var t=e.likes;this._likes=t,this._renderLikes()}},{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_setEventListeners",value:function(){this._element.querySelector(".element__picture").addEventListener("click",this._handleCardClick),this._element.querySelector(".element__remove").addEventListener("click",this._handleRemoveButtonClick),this._element.querySelector(".element__like").addEventListener("click",this._handleLikeButtonClick)}},{key:"_renderLikes",value:function(){var e=this._element.querySelector(".element__like");this.isLiked()?e.classList.add("element__like_active"):e.classList.remove("element__like_active"),this._element.querySelector(".element__like-counter").textContent=this._likes.length}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.close()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("popup_opened")}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){return e._handlePopupClick(t)}))}},{key:"_handlePopupClick",value:function(e){var t=e.target.classList;(t.contains("popup")||t.contains("popup__close-icon"))&&this.close()}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=c(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},u.apply(this,arguments)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function l(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(p,t);var n,r,o,i,c=(o=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(o);if(i){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return l(this,e)});function p(t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(r=c.call(this,t))._submitCallback=n,r._form=r._popup.querySelector(e.formSelector),r._inputFields=Array.from(r._form.querySelectorAll(e.inputSelector)),r}return n=p,(r=[{key:"close",value:function(){u(f(p.prototype),"close",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitCallback(e._getInputValues())})),u(f(p.prototype),"setEventListeners",this).call(this)}},{key:"setInputValues",value:function(e){this._inputFields.forEach((function(t){var n=e[t.name];n&&(t.value=n)}))}},{key:"getForm",value:function(){return this._form}},{key:"_getInputValues",value:function(){var e={};return this._inputFields.forEach((function(t){return e[t.name]=t.value})),e}}])&&a(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),p}(o);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=v(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},d.apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function b(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(o){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._photo=t._popup.querySelector(".popup__photo"),t._name=t._popup.querySelector(".popup__name-preview"),t}return t=a,(n=[{key:"open",value:function(e){var t=e.name,n=e.link;this._photo.src=n,this._photo.alt=t,this._name.textContent=t,d(m(a.prototype),"open",this).call(this)}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(o);function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){e.forEach(this._renderer)}},{key:"addItem",value:function(e,t){t?this._container.prepend(e):this._container.append(e)}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=0,this._name=document.querySelector(t),this._about=document.querySelector(n),this._avatar=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getOwnId",value:function(){return this._id}},{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e){var t=e._id,n=e.name,r=e.about;this._id=t,this._name.textContent=n,this._about.textContent=r}},{key:"getAvatar",value:function(){return this._avatar.src}},{key:"setAvatar",value:function(e){this._avatar.src=e}}])&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._validatorSettings=t,this._form=n,this._inputFields=Array.from(this._form.querySelectorAll(this._validatorSettings.inputSelector)),this._submitButton=this._form.querySelector(this._validatorSettings.submitButtonSelector)}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"initValidationState",value:function(){var e=this;this._inputFields.forEach((function(t){return e._hideInputError(t)})),this._toggleSubmitButtonState()}},{key:"_setEventListeners",value:function(){var e=this;this._toggleSubmitButtonState(),this._inputFields.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleSubmitButtonState()}))}))}},{key:"_toggleSubmitButtonState",value:function(){this._areAllInputsValid()?(this._submitButton.removeAttribute("disabled"),this._submitButton.classList.remove("popup__submit-button_disabled")):(this._submitButton.setAttribute("disabled",""),this._submitButton.classList.add("popup__submit-button_disabled"))}},{key:"_areAllInputsValid",value:function(){return this._inputFields.every((function(e){return e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._validatorSettings.inputErrorClass),n.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._validatorSettings.inputErrorClass),t.textContent=""}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(t){var n=t.userUrl,r=t.baseUrl,o=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userUrl=n,this._baseUrl=r,this._headers=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._userUrl),{headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"saveAvatar",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._checkResponse(e)}))}},{key:"saveProfile",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._checkResponse(e)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._checkResponse(e)}))}},{key:"removeCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status,", ").concat(e.statusText))}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function L(e){console.log(e)}function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=U(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},T.apply(this,arguments)}function U(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}function B(e,t){return B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},B(e,t)}function x(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(r);if(o){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return x(this,e)});function a(){return R(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__submit-button").addEventListener("click",(function(){return e._submitCallback()})),T(A(a.prototype),"setEventListeners",this).call(this)}},{key:"open",value:function(e){this._submitCallback=e,T(A(a.prototype),"open",this).call(this)}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(o),F=new O(".profile-info__title",".profile-info__subtitle",".profile__avatar-photo"),D=new p("#avatar-popup",(function(e){var t=Y(D.getForm());W.saveAvatar(e).then((function(e){F.setAvatar(e.avatar),D.close()})).catch(L).finally(t)}));D.setEventListeners();var N=new C(e,D.getForm());N.enableValidation(),document.querySelector(".profile__avatar-button").addEventListener("click",(function(){D.setInputValues({avatar:F.getAvatar()}),N.initValidationState(),D.open()}));var J=new p("#profile-popup",(function(e){var t=Y(J.getForm());W.saveProfile(e).then((function(e){F.setUserInfo(e),J.close()})).catch(L).finally(t)}));J.setEventListeners();var H=new C(e,J.getForm());H.enableValidation(),document.querySelector(".profile-info__edit-button").addEventListener("click",(function(){J.setInputValues(F.getUserInfo()),H.initValidationState(),J.open()}));var z=new p("#new-place-popup",(function(e){var t=Y(z.getForm());W.addCard(e).then((function(e){Q.addItem(X(e),!0),z.close()})).catch(L).finally(t)}));z.setEventListeners();var M=new C(e,z.getForm());M.enableValidation(),document.querySelector(".profile__add-button").addEventListener("click",(function(){M.initValidationState(),z.open()}));var G=new V("#remove-card-popup");G.setEventListeners();var K=new k("#preview-popup");K.setEventListeners();var Q=new g((function(e){return Q.addItem(X(e),!1)}),".elements"),W=new j({userUrl:"https://nomoreparties.co/v1/cohort-41/users/me",baseUrl:"https://mesto.nomoreparties.co/v1/cohort-41",headers:{authorization:"9d97c63b-334e-41b1-ad1d-f8e460dd9ec6","Content-Type":"application/json"}});function X(e){var t=new n(F.getOwnId(),e,"#element-template",(function(){return K.open(e)}),(function(){return G.open((function(){W.removeCard(t.getCardId()).then((function(){t.removeCard(),G.close()})).catch(L)}))}),(function(){(t.isLiked()?W.removeLike(t.getCardId()):W.addLike(t.getCardId())).then((function(e){return t.updateLikes(e)})).catch(L)}));return t.generateCard()}function Y(e){var t=e.querySelector(".popup__submit-button"),n=t.textContent;return t.textContent="Сохранение...",function(){return t.textContent=n}}Promise.all([W.getUserInfo(),W.getInitialCards()]).then((function(e){F.setAvatar(e[0].avatar),F.setUserInfo(e[0]),Q.renderItems(e[1])})).catch(L)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bkMsTUFBTWIsSSIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMv0YFvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvUHJvbWlzZVV0aWxzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbi8vICAgICB7XG4vLyAgICAgICAgIG5hbWU6ICfQkNGA0YXRi9C3Jyxcbi8vICAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnJ1xuLy8gICAgIH0sXG4vLyAgICAge1xuLy8gICAgICAgICBuYW1lOiAn0KfQtdC70Y/QsdC40L3RgdC60LDRjyDQvtCx0LvQsNGB0YLRjCcsXG4vLyAgICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZydcbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgICAgbmFtZTogJ9CY0LLQsNC90L7QstC+Jyxcbi8vICAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9pdmFub3ZvLmpwZydcbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgICAgbmFtZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxuLy8gICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnXG4vLyAgICAgfSxcbi8vICAgICB7XG4vLyAgICAgICAgIG5hbWU6ICfQpdC+0LvQvNC+0LPQvtGA0YHQutC40Lkg0YDQsNC50L7QvScsXG4vLyAgICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZydcbi8vICAgICB9LFxuLy8gICAgIHtcbi8vICAgICAgICAgbmFtZTogJ9CR0LDQudC60LDQuycsXG4vLyAgICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYmFpa2FsLmpwZydcbi8vICAgICB9XG4vLyBdO1xuXG5leHBvcnQgY29uc3QgZm9ybVNlbGVjdG9ycyA9IHtcbiAgICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICAgIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc3VibWl0LWJ1dHRvbicsXG4gICAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InXG59O1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIG93bklkLFxuICAgICAgICB7X2lkLCBuYW1lLCBsaW5rLCBvd25lciwgbGlrZXN9LFxuICAgICAgICBjYXJkU2VsZWN0b3IsXG4gICAgICAgIGhhbmRsZUNhcmRDbGljayxcbiAgICAgICAgaGFuZGxlUmVtb3ZlQnV0dG9uQ2xpY2ssXG4gICAgICAgIGhhbmRsZUxpa2VCdXR0b25DbGljayxcbiAgICApIHtcbiAgICAgICAgdGhpcy5fb3duSWQgPSBvd25JZDtcbiAgICAgICAgdGhpcy5faWQgPSBfaWQ7XG4gICAgICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICAgICAgdGhpcy5fb3duZXJJZCA9IG93bmVyLl9pZDtcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcbiAgICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgICAgIHRoaXMuX2hhbmRsZVJlbW92ZUJ1dHRvbkNsaWNrID0gaGFuZGxlUmVtb3ZlQnV0dG9uQ2xpY2s7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b25DbGljayA9IGhhbmRsZUxpa2VCdXR0b25DbGljaztcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgICAgIGNvbnN0IHBpY3R1cmUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19waWN0dXJlJyk7XG4gICAgICAgIHBpY3R1cmUuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICAgICAgcGljdHVyZS5zcmMgPSB0aGlzLl9saW5rO1xuXG4gICAgICAgIGlmICh0aGlzLl9vd25JZCA9PT0gdGhpcy5fb3duZXJJZCkge1xuICAgICAgICAgICAgY29uc3QgdHJhc2hCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19yZW1vdmUnKTtcbiAgICAgICAgICAgIHRyYXNoQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2VsZW1lbnRfX3JlbW92ZV9oaWRkZW4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gICAgfVxuXG4gICAgZ2V0Q2FyZElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faWQ7XG4gICAgfVxuXG4gICAgcmVtb3ZlQ2FyZCgpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICBpc0xpa2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGlrZXMuZmluZChsaWtlID0+IGxpa2UuX2lkID09PSB0aGlzLl9vd25JZCk7XG4gICAgfVxuXG4gICAgdXBkYXRlTGlrZXMoe2xpa2VzfSkge1xuICAgICAgICB0aGlzLl9saWtlcyA9IGxpa2VzO1xuICAgICAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xuICAgIH1cblxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAgICAgICAuY29udGVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JylcbiAgICAgICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgfVxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19waWN0dXJlJylcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNhcmRDbGljayk7XG5cbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fcmVtb3ZlJylcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZVJlbW92ZUJ1dHRvbkNsaWNrKTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlJylcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUxpa2VCdXR0b25DbGljayk7XG4gICAgfVxuXG4gICAgX3JlbmRlckxpa2VzKCkge1xuICAgICAgICBjb25zdCBoZWFydCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UnKTtcbiAgICAgICAgaWYgKHRoaXMuaXNMaWtlZCgpKSB7XG4gICAgICAgICAgICBoZWFydC5jbGFzc0xpc3QuYWRkKCdlbGVtZW50X19saWtlX2FjdGl2ZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGVhcnQuY2xhc3NMaXN0LnJlbW92ZSgnZWxlbWVudF9fbGlrZV9hY3RpdmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtY291bnRlcicpLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBvcGVuKCkge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZ0ID0+IHRoaXMuX2hhbmRsZVBvcHVwQ2xpY2soZXZ0KSk7XG4gICAgfVxuXG4gICAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBfaGFuZGxlUG9wdXBDbGljayhldnQpIHtcbiAgICAgICAgY29uc3QgY2xhc3NMaXN0ID0gZXZ0LnRhcmdldC5jbGFzc0xpc3Q7XG4gICAgICAgIGlmIChjbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwJykgfHwgY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UtaWNvbicpKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHtmb3JtU2VsZWN0b3JzfSBmcm9tIFwiLi4vdXRpbHMv0YFvbnN0YW50cy5qc1wiO1xuaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0Q2FsbGJhY2spIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG5cbiAgICAgICAgdGhpcy5fc3VibWl0Q2FsbGJhY2sgPSBzdWJtaXRDYWxsYmFjaztcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoZm9ybVNlbGVjdG9ycy5mb3JtU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9pbnB1dEZpZWxkcyA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKGZvcm1TZWxlY3RvcnMuaW5wdXRTZWxlY3RvcikpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICBzdXBlci5jbG9zZSgpO1xuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZXZ0ID0+IHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5fc3VibWl0Q2FsbGJhY2sodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgc2V0SW5wdXRWYWx1ZXModmFsdWVzKSB7XG4gICAgICAgIHRoaXMuX2lucHV0RmllbGRzLmZvckVhY2goaW5wdXRGaWxlZCA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1tpbnB1dEZpbGVkLm5hbWVdO1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRGaWxlZC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRGb3JtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybTtcbiAgICB9XG5cbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IHt9O1xuICAgICAgICB0aGlzLl9pbnB1dEZpZWxkcy5mb3JFYWNoKGlucHV0RmllbGQgPT4gdmFsdWVzW2lucHV0RmllbGQubmFtZV0gPSBpbnB1dEZpZWxkLnZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG5cbiAgICAgICAgdGhpcy5fcGhvdG8gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3Bob3RvJyk7XG4gICAgICAgIHRoaXMuX25hbWUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX25hbWUtcHJldmlldycpO1xuICAgIH1cblxuICAgIG9wZW4oe25hbWUsIGxpbmt9KSB7XG4gICAgICAgIHRoaXMuX3Bob3RvLnNyYyA9IGxpbms7XG4gICAgICAgIHRoaXMuX3Bob3RvLmFsdCA9IG5hbWU7XG4gICAgICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3IocmVuZGVyZXIsIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgICAgIGl0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xuICAgIH1cblxuICAgIGFkZEl0ZW0oZWxlbWVudCwgYWRkRmlyc3QpIHtcbiAgICAgICAgaWYgKGFkZEZpcnN0KSB7XG4gICAgICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yLCBhdmF0YXJTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9pZCA9IDA7XG4gICAgICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgZ2V0T3duSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZDtcbiAgICB9XG5cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXG4gICAgICAgICAgICBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzZXRVc2VySW5mbyh7X2lkLCBuYW1lLCBhYm91dH0pIHtcbiAgICAgICAgdGhpcy5faWQgPSBfaWQ7XG4gICAgICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xuICAgIH1cblxuICAgIGdldEF2YXRhcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F2YXRhci5zcmM7XG4gICAgfVxuXG4gICAgc2V0QXZhdGFyKGF2YXRhcikge1xuICAgICAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcih2YWxpZGF0b3JTZXR0aW5ncywgZm9ybSkge1xuICAgICAgICB0aGlzLl92YWxpZGF0b3JTZXR0aW5ncyA9IHZhbGlkYXRvclNldHRpbmdzO1xuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybTtcbiAgICAgICAgdGhpcy5faW5wdXRGaWVsZHMgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl92YWxpZGF0b3JTZXR0aW5ncy5pbnB1dFNlbGVjdG9yKSk7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl92YWxpZGF0b3JTZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICBpbml0VmFsaWRhdGlvblN0YXRlKCkge1xuICAgICAgICB0aGlzLl9pbnB1dEZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHRoaXMuX2hpZGVJbnB1dEVycm9yKGZpZWxkKSk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ1dHRvblN0YXRlKCk7XG4gICAgfVxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdXR0b25TdGF0ZSgpO1xuXG4gICAgICAgIHRoaXMuX2lucHV0RmllbGRzLmZvckVhY2goaW5wdXRGaWVsZCA9PiB7XG4gICAgICAgICAgICBpbnB1dEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEZpZWxkKTtcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdXR0b25TdGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF90b2dnbGVTdWJtaXRCdXR0b25TdGF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2FyZUFsbElucHV0c1ZhbGlkKCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJycpO1xuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX19zdWJtaXQtYnV0dG9uX2Rpc2FibGVkJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfYXJlQWxsSW5wdXRzVmFsaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnB1dEZpZWxkcy5ldmVyeShmaWVsZCA9PiBmaWVsZC52YWxpZGl0eS52YWxpZCk7XG4gICAgfVxuXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdG9yU2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIH1cblxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRvclNldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gICAgY29uc3RydWN0b3Ioe3VzZXJVcmwsIGJhc2VVcmwsIGhlYWRlcnN9KSB7XG4gICAgICAgIHRoaXMuX3VzZXJVcmwgPSB1c2VyVXJsO1xuICAgICAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICAgICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91c2VyVXJsfWAsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcbiAgICB9XG5cbiAgICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcbiAgICB9XG5cbiAgICBzYXZlQXZhdGFyKGF2YXRhckRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShhdmF0YXJEYXRhKSxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xuICAgIH1cblxuICAgIHNhdmVQcm9maWxlKHByb2ZpbGVEYXRhKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwcm9maWxlRGF0YSksXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcbiAgICB9XG5cbiAgICBhZGRDYXJkKGNhcmREYXRhKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGNhcmREYXRhKSxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xuICAgIH1cblxuICAgIHJlbW92ZUNhcmQoY2FyZElkKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xuICAgIH1cblxuICAgIGFkZExpa2UoY2FyZElkKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xuICAgIH1cblxuICAgIHJlbW92ZUxpa2UoY2FyZElkKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xuICAgIH1cblxuICAgIF9jaGVja1Jlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5va1xuICAgICAgICAgICAgPyByZXNwb25zZS5qc29uKClcbiAgICAgICAgICAgIDogUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXNwb25zZS5zdGF0dXN9LCAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgfVxufSIsImV4cG9ydCBmdW5jdGlvbiBsb2dFcnJvcihlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhTdWJtaXQgZXh0ZW5kcyBQb3B1cCB7XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc3VibWl0LWJ1dHRvbicpXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9zdWJtaXRDYWxsYmFjaygpKTtcblxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIG9wZW4oc3VibWl0Q2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fc3VibWl0Q2FsbGJhY2sgPSBzdWJtaXRDYWxsYmFjaztcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cbn0iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcblxuaW1wb3J0IHtmb3JtU2VsZWN0b3JzfSBmcm9tIFwiLi4vc2NyaXB0cy91dGlscy/RgW9uc3RhbnRzLmpzXCI7XG5cbmltcG9ydCBDYXJkIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQge2xvZ0Vycm9yfSBmcm9tIFwiLi4vc2NyaXB0cy91dGlscy9Qcm9taXNlVXRpbHMuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhTdWJtaXQgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXRcIjtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXG4gICAgJy5wcm9maWxlLWluZm9fX3RpdGxlJyxcbiAgICAnLnByb2ZpbGUtaW5mb19fc3VidGl0bGUnLFxuICAgICcucHJvZmlsZV9fYXZhdGFyLXBob3RvJyxcbik7XG5cbmNvbnN0IGF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gICAgJyNhdmF0YXItcG9wdXAnLFxuICAgIGF2YXRhckRhdGEgPT4ge1xuICAgICAgICBjb25zdCBjbGVhbnVwID0gaW5pdGlhbGl6ZVNhdmluZ1Byb2dyZXNzKGF2YXRhclBvcHVwLmdldEZvcm0oKSk7XG4gICAgICAgIGFwaS5zYXZlQXZhdGFyKGF2YXRhckRhdGEpXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIHVzZXJJbmZvLnNldEF2YXRhcihyZXMuYXZhdGFyKTtcbiAgICAgICAgICAgICAgICBhdmF0YXJQb3B1cC5jbG9zZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChsb2dFcnJvcilcbiAgICAgICAgICAgIC5maW5hbGx5KGNsZWFudXApO1xuICAgIH0sXG4pO1xuXG5hdmF0YXJQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNlbGVjdG9ycywgYXZhdGFyUG9wdXAuZ2V0Rm9ybSgpKTtcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBhdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWJ1dHRvbicpO1xuYXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGF2YXRhclBvcHVwLnNldElucHV0VmFsdWVzKHtcbiAgICAgICAgYXZhdGFyOiB1c2VySW5mby5nZXRBdmF0YXIoKSxcbiAgICB9KTtcbiAgICBhdmF0YXJGb3JtVmFsaWRhdG9yLmluaXRWYWxpZGF0aW9uU3RhdGUoKTtcbiAgICBhdmF0YXJQb3B1cC5vcGVuKCk7XG59KTtcblxuY29uc3QgcHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gICAgJyNwcm9maWxlLXBvcHVwJyxcbiAgICBwcm9maWxlRGF0YSA9PiB7XG4gICAgICAgIGNvbnN0IGNsZWFudXAgPSBpbml0aWFsaXplU2F2aW5nUHJvZ3Jlc3MocHJvZmlsZVBvcHVwLmdldEZvcm0oKSk7XG4gICAgICAgIGFwaS5zYXZlUHJvZmlsZShwcm9maWxlRGF0YSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcbiAgICAgICAgICAgICAgICBwcm9maWxlUG9wdXAuY2xvc2UoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2gobG9nRXJyb3IpXG4gICAgICAgICAgICAuZmluYWxseShjbGVhbnVwKTtcbiAgICB9LFxuKTtcblxucHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNlbGVjdG9ycywgcHJvZmlsZVBvcHVwLmdldEZvcm0oKSk7XG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHBlbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlLWluZm9fX2VkaXQtYnV0dG9uJyk7XG5wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgcHJvZmlsZVBvcHVwLnNldElucHV0VmFsdWVzKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xuICAgIHByb2ZpbGVGb3JtVmFsaWRhdG9yLmluaXRWYWxpZGF0aW9uU3RhdGUoKTtcbiAgICBwcm9maWxlUG9wdXAub3BlbigpO1xufSk7XG5cbmNvbnN0IG5ld1BsYWNlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgICAnI25ldy1wbGFjZS1wb3B1cCcsXG4gICAgY2FyZERhdGEgPT4ge1xuICAgICAgICBjb25zdCBjbGVhbnVwID0gaW5pdGlhbGl6ZVNhdmluZ1Byb2dyZXNzKG5ld1BsYWNlUG9wdXAuZ2V0Rm9ybSgpKTtcbiAgICAgICAgYXBpLmFkZENhcmQoY2FyZERhdGEpXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIHNlY3Rpb24uYWRkSXRlbShtYWtlQ2FyZChyZXMpLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBuZXdQbGFjZVBvcHVwLmNsb3NlKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGxvZ0Vycm9yKVxuICAgICAgICAgICAgLmZpbmFsbHkoY2xlYW51cCk7XG4gICAgfSxcbik7XG5cbm5ld1BsYWNlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgbmV3UGxhY2VGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNlbGVjdG9ycywgbmV3UGxhY2VQb3B1cC5nZXRGb3JtKCkpO1xubmV3UGxhY2VGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgbmV3UGxhY2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xubmV3UGxhY2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgbmV3UGxhY2VGb3JtVmFsaWRhdG9yLmluaXRWYWxpZGF0aW9uU3RhdGUoKTtcbiAgICBuZXdQbGFjZVBvcHVwLm9wZW4oKTtcbn0pO1xuXG5jb25zdCBzdWJtaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhTdWJtaXQoJyNyZW1vdmUtY2FyZC1wb3B1cCcpO1xuc3VibWl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKCcjcHJldmlldy1wb3B1cCcpO1xucHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAgICBjYXJkRGF0YSA9PiBzZWN0aW9uLmFkZEl0ZW0obWFrZUNhcmQoY2FyZERhdGEpLCBmYWxzZSksXG4gICAgJy5lbGVtZW50cycsXG4pO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgICB1c2VyVXJsOiAnaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC00MS91c2Vycy9tZScsXG4gICAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDEnLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogJzlkOTdjNjNiLTMzNGUtNDFiMS1hZDFkLWY4ZTQ2MGRkOWVjNicsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfVxufSk7XG5cblByb21pc2VcbiAgICAuYWxsKFtcbiAgICAgICAgYXBpLmdldFVzZXJJbmZvKCksXG4gICAgICAgIGFwaS5nZXRJbml0aWFsQ2FyZHMoKSxcbiAgICBdKVxuICAgIC50aGVuKHJlc3VsdHMgPT4ge1xuICAgICAgICB1c2VySW5mby5zZXRBdmF0YXIocmVzdWx0c1swXS5hdmF0YXIpO1xuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXN1bHRzWzBdKTtcbiAgICAgICAgc2VjdGlvbi5yZW5kZXJJdGVtcyhyZXN1bHRzWzFdKTtcbiAgICB9KVxuICAgIC5jYXRjaChsb2dFcnJvcik7XG5cbmZ1bmN0aW9uIG1ha2VDYXJkKGNhcmREYXRhKSB7XG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgICAgICB1c2VySW5mby5nZXRPd25JZCgpLFxuICAgICAgICBjYXJkRGF0YSxcbiAgICAgICAgJyNlbGVtZW50LXRlbXBsYXRlJyxcbiAgICAgICAgKCkgPT4gcHJldmlld1BvcHVwLm9wZW4oY2FyZERhdGEpLFxuICAgICAgICAoKSA9PiBzdWJtaXRQb3B1cC5vcGVuKCgpID0+IHtcbiAgICAgICAgICAgIGFwaS5yZW1vdmVDYXJkKGNhcmQuZ2V0Q2FyZElkKCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjYXJkLnJlbW92ZUNhcmQoKTtcbiAgICAgICAgICAgICAgICAgICAgc3VibWl0UG9wdXAuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChsb2dFcnJvcik7XG4gICAgICAgIH0pLFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsaWtlUHJvbWlzZSA9IGNhcmQuaXNMaWtlZCgpXG4gICAgICAgICAgICAgICAgPyBhcGkucmVtb3ZlTGlrZShjYXJkLmdldENhcmRJZCgpKVxuICAgICAgICAgICAgICAgIDogYXBpLmFkZExpa2UoY2FyZC5nZXRDYXJkSWQoKSk7XG5cbiAgICAgICAgICAgIGxpa2VQcm9taXNlXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IGNhcmQudXBkYXRlTGlrZXMocmVzKSlcbiAgICAgICAgICAgICAgICAuY2F0Y2gobG9nRXJyb3IpO1xuICAgICAgICB9LFxuICAgICk7XG4gICAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG59XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVTYXZpbmdQcm9ncmVzcyhmb3JtKSB7XG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3N1Ym1pdC1idXR0b24nKTtcbiAgICBjb25zdCBwcmV2aW91c0NvbnRlbnQgPSBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG4gICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJztcbiAgICByZXR1cm4gKCkgPT4gc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gcHJldmlvdXNDb250ZW50O1xufSJdLCJuYW1lcyI6WyJmb3JtU2VsZWN0b3JzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5wdXRFcnJvckNsYXNzIiwiQ2FyZCIsIm93bklkIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlUmVtb3ZlQnV0dG9uQ2xpY2siLCJoYW5kbGVMaWtlQnV0dG9uQ2xpY2siLCJfaWQiLCJuYW1lIiwibGluayIsIm93bmVyIiwibGlrZXMiLCJ0aGlzIiwiX293bklkIiwiX25hbWUiLCJfbGluayIsIl9vd25lcklkIiwiX2xpa2VzIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlUmVtb3ZlQnV0dG9uQ2xpY2siLCJfaGFuZGxlTGlrZUJ1dHRvbkNsaWNrIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJwaWN0dXJlIiwiYWx0Iiwic3JjIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiX3JlbmRlckxpa2VzIiwiZmluZCIsImxpa2UiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwiaGVhcnQiLCJpc0xpa2VkIiwiYWRkIiwibGVuZ3RoIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2hhbmRsZVBvcHVwQ2xpY2siLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRDYWxsYmFjayIsIl9zdWJtaXRDYWxsYmFjayIsIl9mb3JtIiwiX2lucHV0RmllbGRzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsInJlc2V0IiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJ2YWx1ZXMiLCJmb3JFYWNoIiwiaW5wdXRGaWxlZCIsInZhbHVlIiwiaW5wdXRGaWVsZCIsIlBvcHVwV2l0aEltYWdlIiwiX3Bob3RvIiwiU2VjdGlvbiIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbXMiLCJlbGVtZW50IiwiYWRkRmlyc3QiLCJwcmVwZW5kIiwiYXBwZW5kIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfYWJvdXQiLCJfYXZhdGFyIiwiYWJvdXQiLCJhdmF0YXIiLCJGb3JtVmFsaWRhdG9yIiwidmFsaWRhdG9yU2V0dGluZ3MiLCJmb3JtIiwiX3ZhbGlkYXRvclNldHRpbmdzIiwiX3N1Ym1pdEJ1dHRvbiIsImZpZWxkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3RvZ2dsZVN1Ym1pdEJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9hcmVBbGxJbnB1dHNWYWxpZCIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImV2ZXJ5IiwidmFsaWRpdHkiLCJ2YWxpZCIsImlucHV0RWxlbWVudCIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJBcGkiLCJ1c2VyVXJsIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfdXNlclVybCIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJfY2hlY2tSZXNwb25zZSIsImF2YXRhckRhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInByb2ZpbGVEYXRhIiwiY2FyZERhdGEiLCJjYXJkSWQiLCJyZXNwb25zZSIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwibG9nRXJyb3IiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJQb3B1cFdpdGhTdWJtaXQiLCJ1c2VySW5mbyIsImF2YXRhclBvcHVwIiwiY2xlYW51cCIsImluaXRpYWxpemVTYXZpbmdQcm9ncmVzcyIsImdldEZvcm0iLCJhcGkiLCJzYXZlQXZhdGFyIiwic2V0QXZhdGFyIiwiY2F0Y2giLCJmaW5hbGx5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsInNldElucHV0VmFsdWVzIiwiZ2V0QXZhdGFyIiwiaW5pdFZhbGlkYXRpb25TdGF0ZSIsIm9wZW4iLCJwcm9maWxlUG9wdXAiLCJzYXZlUHJvZmlsZSIsInNldFVzZXJJbmZvIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJnZXRVc2VySW5mbyIsIm5ld1BsYWNlUG9wdXAiLCJhZGRDYXJkIiwic2VjdGlvbiIsImFkZEl0ZW0iLCJtYWtlQ2FyZCIsIm5ld1BsYWNlRm9ybVZhbGlkYXRvciIsInN1Ym1pdFBvcHVwIiwicHJldmlld1BvcHVwIiwiYXV0aG9yaXphdGlvbiIsImNhcmQiLCJnZXRPd25JZCIsInJlbW92ZUNhcmQiLCJnZXRDYXJkSWQiLCJyZW1vdmVMaWtlIiwiYWRkTGlrZSIsInVwZGF0ZUxpa2VzIiwiZ2VuZXJhdGVDYXJkIiwic3VibWl0QnV0dG9uIiwicHJldmlvdXNDb250ZW50IiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwicmVzdWx0cyIsInJlbmRlckl0ZW1zIl0sInNvdXJjZVJvb3QiOiIifQ==